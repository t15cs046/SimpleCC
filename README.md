# SimpleCC

A simple code clone detection tool to detect type-2 clones in Java source files.


## Build

This program is developed using Eclipse and Maven.
You can import this project to your Eclipse (or your IDE).
The program is dependent on ANTLR4, as indicated in pom.xml.

## Usage

This program takes as arguments a list of source files and directories to be analyzed.
Only "*.java" files are analyzed.

For example:

    java jp.naist.se.simplecc.CloneDetectionMain src/

The program reports a list of code clone pairs in the files.

    <pair>
    CloneDetectionMain.java,96,39,96,135,...
    CloneDetectionMain.java,96,105,96,206,...
    </pair>

Each line shows a file name, line numbers and char positions in the lines indicating the beginning and the end of a cloned code fragment.
A line also includes source code tokens in the fragment. 


## Program Structure

The program comprises four classes.

* CloneDetectionMain is the main class.  
  * `readFiles()` extracts a list of tokens.  All source files are concatenated with a file termination token. 
  * `getNormalizedText()` implements a normalization rule.  The current implementation regards type name keywords and identifiers as the same token.
  * `detectClones()` extracts longest common substrings in the list.
  If a common substring is longer than a threshold, it is reported as clone.
  The naive implementation takes O(n^2) computation (n is the total number of tokens in source files).
* CodeToken represents a token.  
* DirectoryScan is a utility class to list all files in a directory.
* Java8Lexer is a lexical analyzer generated by ANTLR4.  

